{
    "swagger": "2.0",
    "info": {
        "title": "URL Shortener API",
        "description": "API for shortening URLs and tracking analytics.",
        "version": "1.0.0"
    },
    "host": "url-shortener-backend-api.vercel.app",
    "basePath": "/",
    "schemes": [
        "https"
    ],
    "paths": {
        "/auth/google": {
            "get": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Google OAuth authentication",
                "description": "Click [here](https://url-shortener-backend-api.vercel.app/auth/google) to authenticate with Google. Once logged in, you will be redirected with a JWT token.",
                "responses": {
                    "302": {
                        "description": "Redirecting to Google OAuth login"
                    },
                    "500": {
                        "description": "Internal Server Error"
                    }
                }
            }
        },
        "/api/shorten": {
            "post": {
                "tags": [
                    "URL Shortening"
                ],
                "summary": "Shorten a URL",
                "description": "This endpoint allows a user to shorten a URL with an optional custom alias and topic.",
                "parameters": [
                    {
                        "name": "body",
                        "in": "body",
                        "description": "URL shortening request body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/ShortenRequest"
                        },
                        "example": {
                            "longUrl": "https://www.linkedin.com/in/hemantsingh0557/",
                            "customAlias": "hslinked",
                            "topic": "professional"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "URL shortened successfully",
                        "schema": {
                            "$ref": "#/definitions/ShortenResponse"
                        },
                        "example": {
                            "status": "success",
                            "shortUrl": "https://url-shortener-backend-api.vercel.app/hslinked",
                            "createdAt": "2025-01-09T16:56:43.965Z"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "example": {
                            "status": 400,
                            "message": "bad request"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "example": {
                            "status": 401,
                            "message": "Unauthorized"
                        }
                    },
                    "409": {
                        "description": "Conflict (URL or Alias already exists)",
                        "example": {
                            "status": 409,
                            "message": "Conflict (URL or Alias already exists)"
                        }
                    }
                },
                "security": [
                    {
                        "BearerAuth": []
                    }
                ]
            }
        },
        "/api/shorten/{alias}": {
            "get": {
                "tags": [
                    "URL Shortening"
                ],
                "summary": "Get long URL for shortened alias",
                "description": "This endpoint allows anyone to get the original URL for a given shortened alias.",
                "parameters": [
                    {
                        "name": "alias",
                        "in": "path",
                        "description": "Alias for the shortened URL",
                        "required": true,
                        "type": "string",
                        "example": "hslinked"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Long URL found",
                        "schema": {
                            "$ref": "#/definitions/LongUrlResponse"
                        },
                        "example": {
                            "status": 200,
                            "message": "long url found",
                            "longUrl": "https://www.linkedin.com/in/hemantsingh0557/"
                        }
                    },
                    "404": {
                        "description": "Alias not found",
                        "example": {
                            "status": 404,
                            "message": "Alias 'hslinked' not found"
                        }
                    }
                }
            }
        },
        "/api/analytics/{alias}": {
            "get": {
                "tags": [
                    "Analytics"
                ],
                "summary": "Get analytics for a specific shortened URL",
                "description": "This endpoint returns analytics data (like visit count) for the shortened URL identified by alias.",
                "parameters": [
                    {
                        "name": "alias",
                        "in": "path",
                        "description": "Alias of the shortened URL",
                        "required": true,
                        "type": "string",
                        "example": "hslinked"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Analytics data found",
                        "schema": {
                            "$ref": "#/definitions/AnalyticsResponse"
                        },
                        "example": {
                            "totalClicks": 150,
                            "uniqueUsers": 100,
                            "clicksByDate": [
                                {
                                    "date": "2025-01-01",
                                    "clickCount": 30
                                },
                                {
                                    "date": "2025-01-02",
                                    "clickCount": 45
                                }
                            ],
                            "osType": [
                                {
                                    "osName": "Windows",
                                    "uniqueClicks": 80,
                                    "uniqueUsers": 50
                                }
                            ],
                            "deviceType": [
                                {
                                    "deviceName": "Desktop",
                                    "uniqueClicks": 100,
                                    "uniqueUsers": 70
                                }
                            ]
                        }
                    },
                    "404": {
                        "description": "Alias not found",
                        "example": {
                            "status": 404,
                            "message": "Alias 'hslinked' not found"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "example": {
                            "status": 401,
                            "message": "Unauthorized"
                        }
                    }
                },
                "security": [
                    {
                        "BearerAuth": []
                    }
                ]
            }
        },
        "/api/analytics/topic/{topic}": {
            "get": {
                "tags": [
                    "Analytics"
                ],
                "summary": "Get analytics by topic",
                "description": "This endpoint returns analytics for URLs associated with a particular topic.",
                "parameters": [
                    {
                        "name": "topic",
                        "in": "path",
                        "description": "Topic to filter the analytics",
                        "required": true,
                        "type": "string",
                        "example": "professional"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Analytics data found",
                        "schema": {
                            "$ref": "#/definitions/TopicAnalyticsResponse"
                        },
                        "example": {
                            "totalClicks": 250,
                            "uniqueUsers": 150,
                            "clicksByDate": [
                                {
                                    "date": "2025-01-01",
                                    "clickCount": 60
                                }
                            ],
                            "urls": [
                                {
                                    "shortUrl": "https://url-shortener-backend-api.vercel.app/hslinked",
                                    "totalClicks": 100,
                                    "uniqueUsers": 70
                                }
                            ]
                        }
                    },
                    "404": {
                        "description": "Topic not found",
                        "example": {
                            "status": 404,
                            "message": "Topic 'professional' not found"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "example": {
                            "status": 401,
                            "message": "Unauthorized"
                        }
                    }
                },
                "security": [
                    {
                        "BearerAuth": []
                    }
                ]
            }
        },
        "/api/analytics/overall": {
            "get": {
                "tags": [
                    "Analytics"
                ],
                "summary": "Get overall analytics",
                "description": "This endpoint returns overall analytics for all shortened URLs.",
                "responses": {
                    "200": {
                        "description": "Overall analytics data",
                        "schema": {
                            "$ref": "#/definitions/OverallAnalyticsResponse"
                        },
                        "example": {
                            "totalClicks": 500,
                            "uniqueUsers": 300,
                            "clicksByDate": [
                                {
                                    "date": "2025-01-01",
                                    "clickCount": 100
                                }
                            ],
                            "osType": [
                                {
                                    "osName": "Windows",
                                    "uniqueClicks": 200,
                                    "uniqueUsers": 150
                                }
                            ],
                            "deviceType": [
                                {
                                    "deviceName": "Desktop",
                                    "uniqueClicks": 300,
                                    "uniqueUsers": 200
                                }
                            ]
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "example": {
                            "status": 401,
                            "message": "Unauthorized"
                        }
                    }
                },
                "security": [
                    {
                        "BearerAuth": []
                    }
                ]
            }
        }
    },
    "definitions": {
        "ShortenRequest": {
            "type": "object",
            "properties": {
                "longUrl": {
                    "type": "string",
                    "description": "The original URL to be shortened"
                },
                "customAlias": {
                    "type": "string",
                    "description": "Optional custom alias for the shortened URL"
                },
                "topic": {
                    "type": "string",
                    "description": "Optional topic related to the shortened URL"
                }
            },
            "required": [
                "longUrl"
            ]
        },
        "ShortenResponse": {
            "type": "object",
            "properties": {
                "status": {
                    "type": "string",
                    "description": "Status of the URL shortening"
                },
                "shortUrl": {
                    "type": "string",
                    "description": "The shortened URL"
                },
                "createdAt": {
                    "type": "string",
                    "format": "date-time",
                    "description": "The timestamp when the short URL was created"
                }
            }
        },
        "LongUrlResponse": {
            "type": "object",
            "properties": {
                "longUrl": {
                    "type": "string",
                    "description": "The original URL"
                }
            }
        },
        "AnalyticsResponse": {
            "type": "object",
            "properties": {
                "totalClicks": {
                    "type": "integer",
                    "description": "Total number of clicks"
                },
                "uniqueUsers": {
                    "type": "integer",
                    "description": "Total unique users who clicked the link"
                },
                "clicksByDate": {
                    "type": "array",
                    "items": {
                        "type": "object",
                        "properties": {
                            "date": {
                                "type": "string",
                                "format": "date"
                            },
                            "clickCount": {
                                "type": "integer"
                            }
                        }
                    }
                },
                "osType": {
                    "type": "array",
                    "items": {
                        "type": "object",
                        "properties": {
                            "osName": {
                                "type": "string"
                            },
                            "uniqueClicks": {
                                "type": "integer"
                            },
                            "uniqueUsers": {
                                "type": "integer"
                            }
                        }
                    }
                },
                "deviceType": {
                    "type": "array",
                    "items": {
                        "type": "object",
                        "properties": {
                            "deviceName": {
                                "type": "string"
                            },
                            "uniqueClicks": {
                                "type": "integer"
                            },
                            "uniqueUsers": {
                                "type": "integer"
                            }
                        }
                    }
                }
            }
        },
        "TopicAnalyticsResponse": {
            "type": "object",
            "properties": {
                "totalClicks": {
                    "type": "integer"
                },
                "uniqueUsers": {
                    "type": "integer"
                },
                "clicksByDate": {
                    "type": "array",
                    "items": {
                        "type": "object",
                        "properties": {
                            "date": {
                                "type": "string",
                                "format": "date"
                            },
                            "clickCount": {
                                "type": "integer"
                            }
                        }
                    }
                },
                "urls": {
                    "type": "array",
                    "items": {
                        "type": "object",
                        "properties": {
                            "shortUrl": {
                                "type": "string"
                            },
                            "totalClicks": {
                                "type": "integer"
                            },
                            "uniqueUsers": {
                                "type": "integer"
                            }
                        }
                    }
                }
            }
        },
        "OverallAnalyticsResponse": {
            "type": "object",
            "properties": {
                "totalClicks": {
                    "type": "integer"
                },
                "uniqueUsers": {
                    "type": "integer"
                },
                "clicksByDate": {
                    "type": "array",
                    "items": {
                        "type": "object",
                        "properties": {
                            "date": {
                                "type": "string",
                                "format": "date"
                            },
                            "clickCount": {
                                "type": "integer"
                            }
                        }
                    }
                },
                "osType": {
                    "type": "array",
                    "items": {
                        "type": "object",
                        "properties": {
                            "osName": {
                                "type": "string"
                            },
                            "uniqueClicks": {
                                "type": "integer"
                            },
                            "uniqueUsers": {
                                "type": "integer"
                            }
                        }
                    }
                },
                "deviceType": {
                    "type": "array",
                    "items": {
                        "type": "object",
                        "properties": {
                            "deviceName": {
                                "type": "string"
                            },
                            "uniqueClicks": {
                                "type": "integer"
                            },
                            "uniqueUsers": {
                                "type": "integer"
                            }
                        }
                    }
                }
            }
        }
    },
    "securityDefinitions": {
        "BearerAuth": {
            "type": "apiKey",
            "name": "Authorization",
            "in": "header",
            "description": "JWT authorization header"
        }
    }
}